<header class="transparent scroll-light has-topbar">
    <div id="topbar" class="topbar-dark text-light">
        <div class="container">
            <div class="topbar-left xs-hide">
                <div class="topbar-widget"><a href="~/#"><i class="fa fa-phone"></i>+994 55 333 1755</a></div>
                <div class="topbar-widget"><a href="~/#"><i class="fa fa-envelope"></i><span class="__cf_email__" data-cfemail="4d2e2223392c2e390d3f2823392c2134632e2220">[email&#160;protected]</span></a></div>
                <div class="topbar-widget"><a href="~/#"><i class="fa fa-clock-o"></i>@DateTime.UtcNow.AddHours(4)</a></div>
            </div>

            <div class="topbar-right d-flex align-items-center">
                <div class="social-icons" style="margin-right: 15px;">
                    <a href="~/#"><i class="fa fa-facebook fa-lg"></i></a>
                </div>
            </div>
            <div class="clearfix"></div>
        </div>
    </div>

    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="de-flex sm-pt10">
                    <div class="de-flex-col">
                        <div id="logo">
                            <a asp-controller="home" asp-action="index">
                                <img class="logo-1" src="~/images/logo-light.png" alt="">
                                <img class="logo-2" src="~/images/logo.png" alt="">
                            </a>
                        </div>
                    </div>

                    <div class="de-flex-col header-col-mid">
                        <ul id="mainmenu" style="position:relative;">
                            <li><a class="menu-item" asp-controller="home" asp-action="index">Ana səhifə</a></li>
                            <li><a class="menu-item" asp-controller="Account" asp-action="Dashboard">Profil</a></li>
                            <li><a class="menu-item" asp-controller="car" asp-action="index">Avtomobillər</a></li>
                            <li><a class="menu-item" asp-controller="booking" asp-action="QuickBooking">Sifariş et</a></li>
                            <li>
                                <a class="menu-item" href="~/#">Pages</a>
                                <ul>
                                    <li><a class="menu-item" href="~/about.html">About Us</a></li>
                                    <li><a class="menu-item" href="~/contact.html">Contact</a></li>
                                    <li><a class="menu-item" href="~/login.html">Login</a></li>
                                    <li><a class="menu-item" href="~/register.html">Register</a></li>
                                    <li><a class="menu-item" href="~/404.html">Page 404</a></li>
                                </ul>
                            </li>
                            <li>
                                <a class="menu-item" href="~/#">News</a>
                                <ul>
                                    <li>
                                        <a class="menu-item" href="~/news-standart-right-sidebar.html">News Standard</a>
                                        <ul>
                                            <li><a class="menu-item" href="~/news-standart-right-sidebar.html">Right Sidebar</a></li>
                                            <li><a class="menu-item" href="~/news-standart-left-sidebar.html">Left Sidebar</a></li>
                                            <li><a class="menu-item" href="~/news-standart-no-sidebar.html">No Sidebar</a></li>
                                        </ul>
                                    </li>
                                    <li>
                                        <a class="menu-item" href="~/news-grid-right-sidebar.html">News Grid</a>
                                        <ul>
                                            <li><a class="menu-item" href="~/news-grid-right-sidebar.html">Right Sidebar</a></li>
                                            <li><a class="menu-item" href="~/news-grid-left-sidebar.html">Left Sidebar</a></li>
                                            <li><a class="menu-item" href="~/news-grid-no-sidebar.html">No Sidebar</a></li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>

                            <!-- Seçilmişlər menyusu Elements yerinə -->
                            <li style="position:relative;">
                                <a href="@Url.Action("Index", "Favorites")" class="menu-item">
                                    <i class="fa fa-heart" style="color: red;"></i> Seçilmişlər
                                </a>
                                <ul id="favorites-menu-list"
                                    style="display:none;
                                           min-width:250px;
                                           background:#fff;
                                           color:#000;
                                           padding:10px;
                                           list-style:none;
                                           box-shadow: 0 2px 6px rgba(0,0,0,0.15);
                                           border-radius:4px;
                                           position:absolute;
                                           right:0;
                                           top:100%;
                                           z-index:999;">
                                    <!-- JS ilə əlavə olunacaq -->
                                </ul>
                            </li>
                        </ul>
                    </div>

                    <div class="de-flex-col">
                        <div class="menu_side_area">
                            @if (User.Identity.IsAuthenticated)
                            {
                                <form asp-controller="Account" asp-action="Logout" method="post" class="d-inline">
                                    @Html.AntiForgeryToken()
                                    <button type="submit" class="btn-main border-0 bg-transparent text-white" style="cursor:pointer; background:green">
                                        Log out
                                    </button>
                                </form>
                            }
                            else
                            {
                                <a asp-controller="account" asp-action="login" class="btn-main">Sign in</a>
                            }
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>

<style>
    /* Seçilmişlər dropdown menyusu üçün */
    #favorites-menu-list li {
        padding: 6px 8px;
        border-bottom: 1px solid #ddd;
        display: flex;
        align-items: center;
    }

        #favorites-menu-list li img {
            width: 40px;
            height: 25px;
            object-fit: cover;
            margin-right: 10px;
            border-radius: 3px;
        }

        #favorites-menu-list li:last-child {
            border-bottom: none;
        }
</style>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        document.querySelectorAll(".fa-heart").forEach(function (heart) {
            heart.addEventListener("click", function () {
                let carId = this.dataset.id;

                fetch('/Favorites/Add', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'RequestVerificationToken': document.querySelector('input[name="__RequestVerificationToken"]').value
                    },
                    body: JSON.stringify({ id: carId })
                })
                .then(response => response.json())
                .then(data => {
                    // header-də favorit sayını yenilə
                    document.getElementById("favoritesCount").textContent = data.count;
                });
            });
        });
    });
</script>

